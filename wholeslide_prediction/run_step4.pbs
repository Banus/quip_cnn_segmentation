#!/bin/bash
#LongQ will tell it to run on compute node
#PBS -q longq
# set name of job
#PBS -N cnn_segmentation 
#PBS -e /home/bwang/temp/logs/pbs/
#PBS -o /home/bwang/temp/logs/pbs/
# set the number of nodes and processes per node
#PBS -l nodes=1:ppn=40
#PBS -l mem=80Gb
# mail alert at (b)eginning, (e)nd and (a)bortion of execution
#PBS -m bea
# send mail to the following address
#PBS -M tigerfan7495@gmail.com

echo "-----------------------------------------------------"
echo "Date: $(date)                     Host:$(hostname)"
echo "-----------------------------------------------------"

case_id=$caseid
source_datafile_path="/home/bwang/seer_new/wholeslide_prediction/results"
new_path=$source_datafile_path/$case_id/csv

cd $PBS_O_WORKDIR

/home/tkurc/work/pathomics_featuredb/build/install/featuredb-loader/bin/featuredb-loader \
    --inptype csv \
    --dbhost seahawk.uhmc.sunysb.edu \
    --dbname quip \
    --fromdb \
    --quip $new_path/

echo "-----------------------------------------------------"
echo "Date: $(date)"
echo "-----------------------------------------------------"